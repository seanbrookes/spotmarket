<div ng-controller="AskMainController" class="ModuleContainer">
  <div class="MainCenteredContainer Layout">
    <div>
      <dl>
        <dt ng-show="askCtx.currentAsk.productType">what</dt>
        <dd ng-show="askCtx.currentAsk.productType">{{askCtx.currentAsk.productType}} - {{askCtx.currentAsk.variant}}</dd>
        <dt ng-show="askCtx.currentAsk.lotPrices.length > 0">prices</dt>
        <dd ng-show="askCtx.currentAsk.lotPrices.length > 0">
          <ul>
            <li ng-repeat="price in askCtx.currentAsk.lotPrices">${{price.price}} per {{price.size}}{{price.measure}}</li>
          </ul>
        </dd>
      </dl>
    </div>
    <form class="StandardForm">
      <div class="StandardForm__FieldContainer">
        <label>email (will not be disclosed or made public without your consent)</label>
        <input type="text" placeholder="email" ng-class="validationClassNames.askSellerEmailInput" ng-model="askCtx.currentAsk.seller.email" />
      </div>
      <div class="StandardForm__FieldContainer">
        <label>seller handle</label>
        <input type="text" placeholder="seller handle" ng-model="askCtx.currentAsk.seller.handle" />
      </div>
      <div  class="StandardForm__FieldContainer">
        <label>I am selling:</label>
        <button uib-popover="{{dynamicPopover.content}}" popover-title="{{dynamicPopover.title}}">
          <span class="glyphicon glyphicon-question-sign"></span>
        </button>


        <div class="Layout DropDownMenuParent">
          <input type="text" class="AskHeadlineInput" ng-model="askCtx.currentAsk.productType"/>
          <button ng-click="productCtx.toggleProductTypeMenu()"><span class="glyphicon glyphicon-circle-arrow-down"></span></button>
          <div class="StandardDropDownMenuContainer" ng-show="productCtx.isShowProductTypeMenu">
            <ul class="UDTADropDownList">
              <li class="UDTADropDownListItem" ng-repeat="productType in productCtx.currentProductTypes | orderBy:'name' ">
                <button class="UDTADropDownListButton" ng-click="askCtx.setCurrentProductType(productType)">{{productType.name}}</button>
              </li>
            </ul>
          </div>

          <div class="DropDownMenuContainer">
            <ul class="UDTADropDownList">
              <li class="UDTADropDownListItem" ng-repeat="productType in askCtx.productFilters.productTypeDirectMatchCollection">
                <button class="UDTADropDownListButton" ng-click="askCtx.setCurrentProductType(productType)">{{productType.name}}</button>
              </li>
            </ul>
            <ul class="UDTADropDownList">
              <li class="UDTADropDownListItem" ng-repeat="productType in askCtx.productFilters.productTypeIndirectMatchCollection">
                <button class="UDTADropDownListButton" ng-click="askCtx.setCurrentProductType(productType)">{{productType.name}}</button>
              </li>
            </ul>

          </div>

        </div>






      </div>






      <div>
        <div ng-show="!askCtx.currentAsk.productType">
          <label ng-show="!askCtx.currentAsk.productType">What are you selling?</label>
          <div class="Layout">
            <button class="ImageChoiceButton" ng-click="askCtx.setCurrentProductType('Hop Leaf')">
              <img src="./images/hop-leaf.jpg" />
              <span class="ImageChoiceButton__Text">Hop Leaf</span>
            </button>
            <button class="ImageChoiceButton" ng-click="askCtx.setCurrentProductType('Hop Pellets')">
              <img src="./images/hop-pellets.jpg" />
              <span class="ImageChoiceButton__Text">Hop Pellets</span>
            </button>
            <button class="ImageChoiceButton" ng-click="askCtx.setCurrentProductType('Hop Extract')">
              <img src="./images/hop-extract.jpg" />
              <span class="ImageChoiceButton__Text">Hop Extract</span>
            </button>
            <button class="ImageChoiceButton" ng-click="askCtx.setCurrentProductType('Hop Hash')">
              <img src="./images/hop-hash.jpg" />
              <span class="ImageChoiceButton__Text">Hop Hash</span>
            </button>
          </div>

        </div>


        <div>
          <div ng-show="askCtx.currentAsk.productType" class="StandardForm__FieldContainer Layout">
            <div class="StandardDropDownComponent Layout DropDownMenuParent">
              <input placeholder="variety" type="text" ng-model="askCtx.currentAsk.variant" />

              <div class="DropDownMenuContainer">
                <ul class="UDTADropDownList">
                  <li class="UDTADropDownListItem" ng-repeat="productVariant in askCtx.productFilters.productVariantDirectMatchCollection">
                    <button class="UDTADropDownListButton" ng-click="askCtx.setCurrentProductVariant(productVariant)">{{productVariant.name}}</button>
                  </li>
                </ul>
                <ul class="UDTADropDownList">
                  <li class="UDTADropDownListItem" ng-repeat="productVariant in askCtx.productFilters.productVariantIndirectMatchCollection">
                    <button class="UDTADropDownListButton" ng-click="askCtx.setCurrentProductVariant(productVariant)">{{productVariant.name}}</button>
                  </li>
                </ul>

              </div>
              <button ng-click="productCtx.toggleProductSubTypeMenu()"><span class="glyphicon glyphicon-circle-arrow-down"></span></button>
              <div class="StandardDropDownMenuContainer" ng-show="productCtx.isShowProductSubTypeMenu">
                <ul class="UDTADropDownList">
                  <li class="UDTADropDownListItem" ng-repeat="productSubType in productCtx.currentProductSubTypes">
                    <button class="UDTADropDownListButton" ng-click="askCtx.setCurrentProductSubType(productSubType)">{{productSubType.name}}</button>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div  class="" ng-show="askCtx.currentAsk.variant">
        <header>
          <h4>Ask Price
            <button uib-popover="{{lotMeasurePopover.content}}" popover-title="{{dynamicPopover.title}}">
              <span class="glyphicon glyphicon-question-sign"></span>
            </button>
          </h4>
        </header>
        <sm-lot-form ng-show="isShowAddLotPrice" currentAsk="askCtx.currentAsk"></sm-lot-form>
        <button ng-show="!isShowAddLotPrice" ng-click="togglePriceLotForm()">add price options</button>
      </div>
      <div ng-show="isShowFullDetails">
        <div class="">
          <label>Total quantity:</label>
          <input type="text" ng-model="askCtx.currentAsk.totalQuantity"/>
        </div>
        <ul>
          <li><label><input type="checkbox" />certified organic</label></li>
          <li><label><input type="checkbox" />organically grown</label></li>
        </ul>
        <div class="">
          <label>Details</label>
          <textarea ng-model="askCtx.currentAsk.details"></textarea>
        </div>
      </div>
      <div class="Layout" >
        <button ng-click="askCtx.clearCurrentAsk()">cancel</button>
        <button ng-click="saveAsk()">save</button>
      </div>


    </form>
  </div>

</div>
